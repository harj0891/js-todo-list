(()=>{"use strict";const e=function(e,t,r,a){var o;return{id:(o=n.readProjectArray(),0==o.length?1:o.length>0?o[o.length-1].id+1:void 0),title:e,description:t,dueDate:r,labelColor:a}},t=function(e,t,r,a){var o=n.readItemArray();return{id:0==o.length?1:o.length>0?o[o.length-1].id+1:void 0,title:e,description:t,dueDate:a,project:r,isComplete:!1}},n={readProjectArray:function(){var t=JSON.parse(localStorage.getItem("projects")||"[]");return t.length>0&&t.forEach((function(t){Object.assign(e,t)})),t},readItemArray:function(){var e=JSON.parse(localStorage.getItem("items")||"[]");return e.length>0&&e.forEach((function(e){Object.assign(t,e)})),e},saveProjectArray:function(e){localStorage.setItem("projects",JSON.stringify(e))},saveItemArray:function(e){localStorage.setItem("items",JSON.stringify(e))}},r=function(){function e(){var c=n.readProjectArray(),d=document.querySelector("#container-navigation");d.innerHTML="",c.forEach((function(o){var c=document.createElement("section");switch(c.setAttribute("id","container-project-".concat(o.id)),o.labelColor){case"grey":c.setAttribute("class","label-grey");break;case"blue":c.setAttribute("class","label-blue");break;case"red":c.setAttribute("class","label-red");break;case"green":c.setAttribute("class","label-green")}var i=document.createElement("p");i.textContent="".concat(o.title," Description: ").concat(o.description," Due: ").concat(o.dueDate);var l=document.createElement("button");l.textContent="EDIT",l.addEventListener("click",(function(){!function(t){for(var r,o=n.readProjectArray(),c=0;c<o.length;c++)o[c].id==t&&(r=o[c]);var d=document.querySelector("#container-project-".concat(r.id));if(document.querySelector("#update-project-form"))console.log("project update form already open");else{var i=document.createElement("section");i.setAttribute("id","update-project-form");var l=document.createElement("label");l.setAttribute("for","pname"),l.textContent="Name";var u=document.createElement("input");u.setAttribute("id","pname"),u.value=r.title;var p=document.createElement("label");p.setAttribute("for","pdesc"),p.textContent="Description";var m=document.createElement("input");m.setAttribute("id","pdesc"),m.value=r.description;var s=document.createElement("label");s.setAttribute("for","pduedate"),s.textContent="Due Date";var v=document.createElement("input");v.setAttribute("id","pduedate"),v.setAttribute("type","date"),v.value=r.dueDate;var b=document.createElement("label");b.setAttribute("for","pcolor"),b.textContent="Colour";var C=document.createElement("select");C.setAttribute("id","pcolor");var h=document.createElement("option");h.setAttribute("value","grey"),h.textContent="Grey";var f=document.createElement("option");f.setAttribute("value","blue"),f.textContent="Blue";var A=document.createElement("option");A.setAttribute("value","red"),A.textContent="Red";var E=document.createElement("option");switch(E.setAttribute("value","green"),E.textContent="Green",C.appendChild(h),C.appendChild(f),C.appendChild(A),C.appendChild(E),r.labelColor){case"grey":h.setAttribute("selected","selected");break;case"blue":f.setAttribute("selected","selected");break;case"red":A.setAttribute("selected","selected");break;case"green":E.setAttribute("selected","selected")}var y=document.createElement("button");y.textContent="Update project",i.appendChild(l),i.appendChild(u),i.appendChild(p),i.appendChild(m),i.appendChild(s),i.appendChild(v),i.appendChild(b),i.appendChild(C),i.appendChild(y),d.firstChild.style.display="none",d.insertBefore(i,d.firstChild),y.addEventListener("click",(function(){var t,n,o,c,d;t=r.id,n=u.value,o=m.value,c=v.value,d=C.value,a.updateProject(t,n,o,c,d),e()}))}}(o.id)}));var u=document.createElement("button");u.textContent="DELETE",u.addEventListener("click",(function(){!function(n){var o=document.querySelector("#container");if(document.querySelector("#delete-project-modal"))return!1;var c=document.createElement("section");c.setAttribute("id","delete-project-modal"),c.setAttribute("class","modal");var d=document.createElement("section");d.setAttribute("class","modal-content");var i=document.createElement("p");i.textContent="Are you sure you want to delete ".concat(n.title);var l=document.createElement("button");l.textContent="Yes",l.addEventListener("click",(function(){var o;o=n.id,a.deleteProject(o),e(),t(),r()}));var u=document.createElement("button");u.textContent="No",u.addEventListener("click",(function(){r()})),d.appendChild(i),d.appendChild(l),d.appendChild(u),c.appendChild(d),o.appendChild(c),window.onclick=function(e){e.target==c&&r()}}(o)})),c.appendChild(i),c.appendChild(l),c.appendChild(u),c.addEventListener("click",(function(){t(o.id)})),d.appendChild(c)}));var i=document.createElement("button");i.textContent="NEW PROJECT",i.addEventListener("click",(function(){!function(){var e=document.querySelector("#container-navigation");if(document.querySelector("#create-project-form"))console.log("project create form already open");else{var t=document.createElement("section");t.setAttribute("id","create-project-form");var n=document.createElement("label");n.setAttribute("for","pname"),n.textContent="Name";var r=document.createElement("input");r.setAttribute("id","pname");var a=document.createElement("label");a.setAttribute("for","pdesc"),a.textContent="Description";var c=document.createElement("input");c.setAttribute("id","pdesc");var d=document.createElement("label");d.setAttribute("for","pduedate"),d.textContent="Due Date";var i=document.createElement("input");i.setAttribute("id","pduedate"),i.setAttribute("type","date");var l=document.createElement("label");l.setAttribute("for","pcolor"),l.textContent="Colour";var u=document.createElement("select");u.setAttribute("id","pcolor");var p=document.createElement("option");p.setAttribute("value","grey"),p.textContent="Grey";var m=document.createElement("option");m.setAttribute("value","blue"),m.textContent="Blue";var s=document.createElement("option");s.setAttribute("value","red"),s.textContent="Red";var v=document.createElement("option");v.setAttribute("value","green"),v.textContent="Green",u.appendChild(p),u.appendChild(m),u.appendChild(s),u.appendChild(v);var b=document.createElement("button");b.textContent="Create project",t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(c),t.appendChild(d),t.appendChild(i),t.appendChild(l),t.appendChild(u),t.appendChild(b),e.appendChild(t),b.addEventListener("click",o)}}()})),d.appendChild(i)}function t(e){for(var r,o=n.readProjectArray(),d=n.readItemArray(),i=0;i<o.length;i++)null==e&&(e=o[i].id),o[i].id==e&&(r=o[i]);var l=document.querySelector("#container-todolist");l.innerHTML="";var u=document.createElement("section");u.setAttribute("id","container-project-".concat(r.id)),d.forEach((function(e){if(e.project==r.id){var o=document.createElement("section");o.setAttribute("id","container-item-".concat(e.id)),o.setAttribute("class","item");var d=document.createElement("input");d.setAttribute("id","item-checkbox"),d.setAttribute("type","checkbox"),d.addEventListener("change",(function(){c(e.project,e.id,e.title,e.description,e.dueDate,this.checked)})),e.isComplete&&(o.setAttribute("class","item completed"),d.checked=!0);var i=document.createElement("p");i.textContent="".concat(e.title," Description: ").concat(e.description," Due: ").concat(e.dueDate);var l=document.createElement("button");l.textContent="edit",l.addEventListener("click",(function(){!function(e){for(var t,r=n.readItemArray(),a=0;a<r.length;a++)r[a].id==e&&(t=r[a]);var o=document.querySelector("#container-item-".concat(t.id));if(document.querySelector("#update-item-form-".concat(t.id)))console.log("item update form already open");else{var d=document.createElement("section");d.setAttribute("id","update-item-form-".concat(t.id));var i=document.createElement("label");i.setAttribute("for","itemname"),i.textContent="Name";var l=document.createElement("input");l.setAttribute("id","itemname"),l.value=t.title;var u=document.createElement("label");u.setAttribute("for","itemdesc"),u.textContent="Description";var p=document.createElement("input");p.setAttribute("id","itemdesc"),p.value=t.description;var m=document.createElement("label");m.setAttribute("for","itemduedate"),m.textContent="Due Date";var s=document.createElement("input");s.setAttribute("id","itemduedate"),s.setAttribute("type","date"),s.value=t.dueDate;var v=document.createElement("button");v.textContent="Update item",d.appendChild(i),d.appendChild(l),d.appendChild(u),d.appendChild(p),d.appendChild(m),d.appendChild(s),d.appendChild(v);for(var b=o.childNodes,C=0;C<b.length;C++)b[C].style.display="none";o.insertBefore(d,o.firstChild),v.addEventListener("click",(function(){var e=t.id;c(t.project,e,l.value,p.value,s.value,t.isComplete)}))}}(e.id)}));var p=document.createElement("button");p.textContent="x",p.addEventListener("click",(function(){!function(e,n){a.deleteItem(n),t(e)}(e.project,e.id)})),o.appendChild(d),o.appendChild(i),o.appendChild(l),o.appendChild(p),u.appendChild(o)}}));var p=document.createElement("button");p.textContent="+",p.addEventListener("click",(function(){var e=function(e){if(!document.querySelector("#create-item-form-p".concat(e))){var n=document.createElement("section");n.setAttribute("id","create-item-form-p".concat(e));var r=document.createElement("label");r.setAttribute("for","itemname"),r.textContent="Name";var o=document.createElement("input");o.setAttribute("id","itemname");var c=document.createElement("label");c.setAttribute("for","itemdesc"),c.textContent="Description";var d=document.createElement("input");d.setAttribute("id","itemdesc");var i=document.createElement("label");i.setAttribute("for","itemduedate"),i.textContent="Due Date";var l=document.createElement("input");l.setAttribute("id","itemduedate"),l.setAttribute("type","date");var u=document.createElement("button");return u.textContent="Create item",n.appendChild(r),n.appendChild(o),n.appendChild(c),n.appendChild(d),n.appendChild(i),n.appendChild(l),n.appendChild(u),u.addEventListener("click",(function(){!function(e){var n=document.querySelector("#itemname").value,r=document.querySelector("#itemdesc").value,o=document.querySelector("#itemduedate").value;a.createItem(n,r,e,o),t(e)}(e)})),n}console.log("item create form already open")}(r.id);e&&u.appendChild(e)})),u.appendChild(p),l.appendChild(u)}function r(){document.querySelector("#delete-project-modal").remove()}function o(){var t=document.querySelector("#pname").value,n=document.querySelector("#pdesc").value,r=document.querySelector("#pduedate").value,o=document.querySelector("#pcolor").value;a.createProject(t,n,r,o),e()}function c(e,n,r,o,c,d){a.updateItem(n,r,o,c,d),t(e)}return{displayProjects:e,displayToDoList:t}}(),a=function(){function a(e){for(var t=n.readItemArray(),r=0;r<t.length;r++)t[r].id==e&&t.splice(r,1);n.saveItemArray(t)}return function(){var r=n.readProjectArray(),a=n.readItemArray();if(0==r.length){var o=e("Shopping","Grocery list","2021-05-01","green");r.push(o),n.saveProjectArray(r);var c=e("Fitness","Eye of the tiger","2021-04-27","blue");r.push(c),n.saveProjectArray(r);var d=e("Trading","Stocks and shares","2021-04-27","red");r.push(d),n.saveProjectArray(r)}if(0==a.length){var i=t("Fruit","apples, oranges, bananas",1,"2021-04-27");a.push(i),n.saveItemArray(a);var l=t("Pullups","3 x 10",2,"2021-04-27");a.push(l),n.saveItemArray(a);var u=t("Squats","5 sets of 8 x 90kg",2,"2021-04-27");a.push(u),n.saveItemArray(a)}}(),r.displayProjects(),r.displayToDoList(1),{createProject:function(t,r,a,o){var c=e(t,r,a,o),d=n.readProjectArray();d.push(c),n.saveProjectArray(d)},createItem:function(e,r,a,o){var c=t(e,r,a,o),d=n.readItemArray();d.push(c),n.saveItemArray(d)},updateProject:function(e,t,r,a,o){for(var c,d=n.readProjectArray(),i=0;i<d.length;i++)d[i].id==e&&(c=d[i]);c&&(c.title=t,c.description=r,c.dueDate=a,c.labelColor=o,n.saveProjectArray(d))},updateItem:function(e,t,r,a,o){for(var c,d=n.readItemArray(),i=0;i<d.length;i++)d[i].id==e&&(c=d[i]);c&&(c.title=t,c.description=r,c.dueDate=a,c.isComplete=o,n.saveItemArray(d))},deleteProject:function(e){for(var t=n.readProjectArray(),r=n.readItemArray(),o=0;o<r.length;o++)r[o].project==e&&a(r[o].id);for(o=0;o<t.length;o++)t[o].id===e&&t.splice(o,1);n.saveProjectArray(t)},deleteItem:a}}()})();